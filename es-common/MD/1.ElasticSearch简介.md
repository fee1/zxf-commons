# ElasticSearch doc and common-write（ElasticSearch doc文档摘要）

## 一.什么是ElasticSearch？
```text
    1.ElasticSearch是一个分布式搜索与分析引擎。
    2.配套工具Logstash与Beats，收集、聚合和丰富数据并存储在ElasticSearch中。(称：ELKB)
    3.Kibana，将数据可视化，并且管理与监视堆栈。
    4.为所有数据提供近乎实时的搜索与分析。无论结构化或非结构化文本、数值数据还是地理空间数据，Elasticsearch都可以以支持快速搜索的方式有效地存储和索引。
    5.ElasticSearch分布式特性支持不停机部署无缝增长。
```
```text
    小结：
        1.分布式。
        2.ELKB整套工具。
        3.可视化监视。
        4.支持多种格式的数据存储与索引。
        5.不停机增加集群，良好的扩展性。
```
### 1.数据存储(文档与索引)
```text
    1.ElasticSearch存储数据都会先将数据序列化为JSON格式，按照JSON的格式进行存储数据。存储的数据会出现在ElasticSearch集群中，可以从任何集群节点立即访问到。
    2.当存储文档数据时，ElasticSearch使用倒排索引的数据结构，支持在1秒内几乎实时的索引和搜索，并标识每一个索引出现的文档。
    3.索引是文档的优化集合（类似于Sql的索引，Sql中是一种牺牲空间换时间的策略。）。文档就是数据一条数据存储的键值对（类似于Mysql的表的字段名）。默认情况下，会为
      所有字段数据建立索引（每个字段都具有专用的优化数据结构？）。
    4.无模式能力，不需要你指定其数据类型，ElasticSearch能够动态映射数据类型。当然使用者也可以自定义规则来控制动态映射，或者显示定义映射，完全控制字段的数据存储和
      索引类型。
```
```text
    小结：
        1.JSON：存储数据格式化为JSON形式存储。
        2.及时性：数据存储后能够及时出现在其他的集群节点。
        3.文档：类似与sql的表，其中有字段和类型，默认所有字段都建立索引。
        4.无模式：自动映射数据类型，也可修改映射规则，或者执行操控数据存储类型。
```
### 2.数据输出(搜索和分析)
```text
    1.ElasticSearch客户端支持多种语言：Java、JavaScript、Go、Python等
    2.类似与sql查询的语法(JSON形式)
    3.能够帮助我们在大量的数据中分析数据，查找，汇总，计算以及能够分析最近几个月的数据
```
### 3.可伸缩与弹性：集群，节点和分片(Scalability and resilience: clusters, nodes, and shardsedit)
```text
    1. 我们只需要将服务服务器添加到集群中就可以增加容量，es会自动分配数据和查询的负载均衡。
    2.只有一个主分片，副分片可以随时分配，不会中断索引和查询操作。
    3.es的查询与扩展性能取决于我们设置的分片大小与数量。分片的越多越难维护，分片越大重新平衡集群的时候就会移动分片的时间就会越长。
    建议：分片大小控制在20-40g之内、分片数量控制在20个以内。
    
    如何防止故障：
        1.建立主从集群，主关注与写操作，从关注读操作。主自动将数据同步到从集群中。
        2.当主服务发生故障，将从服务中选取一个自动升级为主服务。
```
